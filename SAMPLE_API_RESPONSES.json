/*
===============================================================================
                    דוגמאות JSON Responses מהשרת - מערכת AI-BI
===============================================================================
*/

// 1. ══════════════════════════════════════════════════════════════════════════
// שאלה: "הצג לי את המכירות לפי לקוח בשנה האחרונה"
// תשובה: טבלה עם נתונים מפורטים
// ══════════════════════════════════════════════════════════════════════════

{
  "messageId": "msg_abc123",
  "chatId": "chat_xyz789",
  "reply": "נמצאו מכירות של 15 לקוחות בשנה האחרונה. הלקוח המוביל הוא חברת אלפא בע\"מ עם 2.3 מיליון ₪. סך כל המכירות הוא 12.8 מיליון ₪.",
  "sql": "SELECT customer_name, SUM(total_amount) as total_sales, COUNT(*) as orders_count FROM sales_invoices WHERE year = 2024 GROUP BY customer_name ORDER BY total_sales DESC",
  "viz": "table",
  "data": {
    "columns": ["שם לקוח", "סך מכירות", "מספר הזמנות"],
    "rows": [
      ["חברת אלפא בע\"מ", 2300000, 45],
      ["ביתא טכנולוגיות", 1850000, 32],
      ["גמא שירותים", 1200000, 28],
      ["דלתא יבוא ויצוא", 980000, 22],
      ["הה משקאות", 750000, 18],
      ["ווסט אנרגיה", 690000, 15],
      ["זיו בנייה", 580000, 12],
      ["חיה אופנה", 520000, 19],
      ["טבע תעשיות", 450000, 11],
      ["יוסף רכב", 380000, 8]
    ]
  },
  "metadata": {
    "executionTime": 234,
    "processingTime": 1520,
    "complexity": "simple"
  }
}

// 2. ══════════════════════════════════════════════════════════════════════════
// שאלה: "תראה לי את המכירות לפי חודש השנה"
// תשובה: בר צ'ארט עם טרנד חודשי
// ══════════════════════════════════════════════════════════════════════════

{
  "messageId": "msg_def456",
  "chatId": "chat_xyz789",
  "reply": "המכירות בשנת 2024 הציגו עלייה מדרגה דצמבר (1.8M ₪) עם שיא בחודש יוני (2.1M ₪). ירידה משמעותית בחודש אוגוסט (1.2M ₪) בגלל החגים.",
  "sql": "SELECT month_name, SUM(total_amount) as monthly_sales FROM sales_invoices WHERE year = 2024 GROUP BY month, month_name ORDER BY month",
  "viz": "bar",
  "data": {
    "columns": ["חודש", "מכירות"],
    "rows": [
      ["ינואר", 1650000],
      ["פברואר", 1420000],
      ["מרץ", 1780000],
      ["אפריל", 1590000],
      ["מאי", 1950000],
      ["יוני", 2100000],
      ["יולי", 1850000],
      ["אוגוסט", 1200000],
      ["ספטמבר", 1680000],
      ["אוקטובר", 1750000],
      ["נובמבר", 1920000],
      ["דצמבר", 1800000]
    ]
  },
  "metadata": {
    "executionTime": 189,
    "processingTime": 1340,
    "complexity": "simple"
  }
}

// 3. ══════════════════════════════════════════════════════════════════════════
// שאלה: "איך מתחלקות המכירות לפי קטגוריות מוצרים?"
// תשובה: פאי צ'ארט עם התפלגות
// ══════════════════════════════════════════════════════════════════════════

{
  "messageId": "msg_ghi789",
  "chatId": "chat_xyz789",
  "reply": "המכירות מתחלקות בין 5 קטגוריות עיקריות: אלקטרוניקה (35%) מובילה, אחריה ביגוד (28%), רהיטים (18%), ספרים (12%) וספורט (7%).",
  "sql": "SELECT category_name, SUM(total_amount) as category_sales FROM sales_invoices si JOIN products p ON si.product_id = p.id WHERE year = 2024 GROUP BY category_name ORDER BY category_sales DESC",
  "viz": "pie",
  "data": {
    "columns": ["קטגוריה", "מכירות"],
    "rows": [
      ["אלקטרוניקה", 4480000],
      ["ביגוד", 3584000],
      ["רהיטים", 2304000],
      ["ספרים", 1536000],
      ["ספורט", 896000]
    ]
  },
  "metadata": {
    "executionTime": 312,
    "processingTime": 1890,
    "complexity": "moderate"
  }
}

// 4. ══════════════════════════════════════════════════════════════════════════
// שאלה: "מה סך המכירות השנה?"
// תשובה: KPI - מספר בולט יחיד
// ══════════════════════════════════════════════════════════════════════════

{
  "messageId": "msg_jkl012",
  "chatId": "chat_xyz789",
  "reply": "סך המכירות בשנת 2024 הוא 12.8 מיליון ₪, עלייה של 23% לעומת שנה שעברה (10.4 מיליון ₪). זה הישג מרשים שמציב אותנו בדרך לעבר היעד השנתי.",
  "sql": "SELECT SUM(total_amount) as total_sales FROM sales_invoices WHERE year = 2024",
  "viz": "kpi",
  "data": {
    "columns": ["סך המכירות"],
    "rows": [
      [12800000]
    ]
  },
  "metadata": {
    "executionTime": 67,
    "processingTime": 890,
    "complexity": "simple"
  }
}

// 5. ══════════════════════════════════════════════════════════════════════════
// שאלה: "תראה לי את הטרנד במכירות בחודשים האחרונים"
// תשובה: Line chart עם טרנד זמן
// ══════════════════════════════════════════════════════════════════════════

{
  "messageId": "msg_mno345",
  "chatId": "chat_xyz789",
  "reply": "הטרנד במכירות בחודשים האחרונים מראה התאוששות מאוגוסט (1.2M ₪) לספטמבר (1.68M ₪) והמשך עלייה לנובמבר (1.92M ₪). הטרנד חיובי עם שיפור מתמיד.",
  "sql": "SELECT DATE_TRUNC('month', invoice_date) as month, SUM(total_amount) as monthly_sales FROM sales_invoices WHERE invoice_date >= '2024-08-01' GROUP BY month ORDER BY month",
  "viz": "line",
  "data": {
    "columns": ["תאריך", "מכירות"],
    "rows": [
      ["2024-08-01", 1200000],
      ["2024-09-01", 1680000],
      ["2024-10-01", 1750000],
      ["2024-11-01", 1920000],
      ["2024-12-01", 1800000]
    ]
  },
  "metadata": {
    "executionTime": 156,
    "processingTime": 1120,
    "complexity": "simple"
  }
}

// 6. ══════════════════════════════════════════════════════════════════════════
// שאלה: "איזה מוצרים נמכרו הכי הרבה השנה?"
// תשובה: טבלה עם TOP מוצרים
// ══════════════════════════════════════════════════════════════════════════

{
  "messageId": "msg_pqr678",
  "chatId": "chat_xyz789",
  "reply": "המוצרים הנמכרים ביותר בשנה: iPhone 15 Pro (1,250 יחידות) מוביל, אחריו למינגטון פרימיום (980 יחידות). סך הכמות הנמכרת של 10 המוצרים המובילים היא 6,890 יחידות.",
  "sql": "SELECT product_name, SUM(quantity) as total_qty, SUM(total_amount) as total_revenue FROM sales_invoices WHERE year = 2024 GROUP BY product_name ORDER BY total_qty DESC LIMIT 10",
  "viz": "table",
  "data": {
    "columns": ["שם מוצר", "כמות נמכרת", "סך הכנסות"],
    "rows": [
      ["iPhone 15 Pro", 1250, 4875000],
      ["למינגטון פרימיום", 980, 294000],
      ["מחשב נייד Dell", 850, 2550000],
      ["אוזניות Sony", 750, 525000],
      ["חולצת פולו", 690, 207000],
      ["ספר בישול", 580, 116000],
      ["כיסא משרדי", 520, 832000],
      ["מקלדת מכנית", 480, 240000],
      ["נעלי ספורט", 420, 315000],
      ["תיק גב", 350, 175000]
    ]
  },
  "metadata": {
    "executionTime": 278,
    "processingTime": 1650,
    "complexity": "moderate"
  }
}

// 7. ══════════════════════════════════════════════════════════════════════════
// שאלה: "מה הממוצע החודשי של המכירות?"
// תשובה: KPI פשוט עם חישוב
// ══════════════════════════════════════════════════════════════════════════

{
  "messageId": "msg_stu901",
  "chatId": "chat_xyz789",
  "reply": "הממוצע החודשי של המכירות בשנת 2024 הוא 1.67 מיליון ₪. זה מבוסס על סך מכירות של 12.8 מיליון ₪ חלקי 12 חודשים.",
  "sql": "SELECT AVG(monthly_sales) as avg_monthly FROM (SELECT SUM(total_amount) as monthly_sales FROM sales_invoices WHERE year = 2024 GROUP BY month) AS monthly_totals",
  "viz": "kpi",
  "data": {
    "columns": ["ממוצע חודשי"],
    "rows": [
      [1666667]
    ]
  },
  "metadata": {
    "executionTime": 89,
    "processingTime": 950,
    "complexity": "simple"
  }
}

/*
===============================================================================
                                    הערות
===============================================================================

סוגי viz שהשרת תומך בהם:
- "table" - טבלה מפורטת
- "bar" - בר צ'ארט
- "pie" - פאי צ'ארט  
- "line" - ליין צ'ארט
- "kpi" - מספר בולט יחיד
- "none" - אין תצוגה חזותית

מבנה data תמיד:
- columns: מערך של כותרות עמודות
- rows: מערך של מערכים של נתונים

metadata כולל:
- executionTime: זמן הרצת SQL במילישניות
- processingTime: זמן עיבוד כולל במילישניות  
- complexity: רמת מורכבות השאלה
*/ 